{% extends "base.html" %}
{% block title %}Depósito - Brutal Crypto{% endblock %}

{% block content %}
<div class="deposit-container" style="display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:80vh; background:#fff; color:#111; padding:50px; border-radius:20px; box-shadow:0 0 30px rgba(0,0,0,0.15);">
    <h2 style="color:#ff3b3b; margin-bottom:20px;">Depósito via PIX</h2>
    <p>Valor mínimo: <strong style="color:#ff3b3b;">R$ 37,99</strong></p>

    <form method="POST" style="margin:20px 0;">
        <input type="number" step="0.01" min="37.99" name="amount" id="amount" value="37.99" required
               style="padding:15px; width:250px; border-radius:10px; border:1px solid rgba(0,0,0,0.1); outline:none; margin-bottom:10px; font-size:16px;">
        <br>
        <button type="submit" style="padding:12px 25px; background:#ff3b3b; border:none; border-radius:12px; color:#fff; font-weight:bold; cursor:pointer; transition:0.3s; font-size:16px;">
            Gerar QR Code
        </button>
    </form>

    <div style="margin-top:30px; text-align:center;">
        <h4 style="color:#222;">Ou use este QR Code:</h4>
        <div style="background:#f7f7f7; padding:15px; border-radius:15px; display:inline-block; box-shadow:0 0 10px rgba(0,0,0,0.05);">
            <img src="data:image/png;base64,{{ qr_img }}" alt="QR Code PIX" style="width:260px; height:260px; border-radius:15px;">
        </div>
        <p style="margin-top:15px;">Chave PIX: <strong id="pix-key" style="color:#ff3b3b;">{{ pix_key }}</strong>
            <button onclick="copyPix()" style="padding:6px 14px; border:none; border-radius:8px; background:#ff3b3b; color:#fff; cursor:pointer; font-weight:bold;">Copiar</button>
        </p>
    </div>
</div>

<script>
function copyPix() {
    const key = document.getElementById("pix-key").innerText;
    navigator.clipboard.writeText(key).then(() => {
        alert("Chave PIX copiada!");
    }).catch(err => {
        alert("Erro ao copiar a chave PIX");
    });
}
</script>
{% endblock %}
